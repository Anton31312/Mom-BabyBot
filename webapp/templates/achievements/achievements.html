{% extends 'base.html' %}
{% load static %}

{% block title %}–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è{% endblock %}

{% block extra_css %}
<style>
    .achievement-card {
        border: 2px solid #e0e0e0;
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 20px;
        transition: all 0.3s ease;
        background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
    }
    
    .achievement-card.earned {
        border-color: #28a745;
        background: linear-gradient(135deg, #d4edda 0%, #ffffff 100%);
        box-shadow: 0 4px 8px rgba(40, 167, 69, 0.2);
    }
    
    .achievement-card.in-progress {
        border-color: #ffc107;
        background: linear-gradient(135deg, #fff3cd 0%, #ffffff 100%);
    }
    
    .achievement-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
    }
    
    .achievement-icon {
        font-size: 3rem;
        margin-bottom: 15px;
        display: block;
        text-align: center;
    }
    
    .achievement-title {
        font-size: 1.25rem;
        font-weight: bold;
        margin-bottom: 10px;
        color: #333;
    }
    
    .achievement-description {
        color: #666;
        margin-bottom: 15px;
        line-height: 1.5;
    }
    
    .achievement-meta {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
    }
    
    .achievement-points {
        background: #007bff;
        color: white;
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 0.9rem;
        font-weight: bold;
    }
    
    .achievement-difficulty {
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 0.9rem;
        font-weight: bold;
    }
    
    .difficulty-easy { background: #d4edda; color: #155724; }
    .difficulty-medium { background: #fff3cd; color: #856404; }
    .difficulty-hard { background: #f8d7da; color: #721c24; }
    .difficulty-legendary { background: #d1ecf1; color: #0c5460; }
    
    .progress-bar-container {
        background: #e9ecef;
        border-radius: 10px;
        height: 20px;
        margin-top: 10px;
        overflow: hidden;
    }
    
    .progress-bar {
        background: linear-gradient(90deg, #28a745, #20c997);
        height: 100%;
        border-radius: 10px;
        transition: width 0.3s ease;
        position: relative;
    }
    
    .progress-text {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: white;
        font-size: 0.8rem;
        font-weight: bold;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
    }
    
    .stats-card {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-radius: 12px;
        padding: 25px;
        margin-bottom: 30px;
        text-align: center;
    }
    
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 20px;
        margin-top: 20px;
    }
    
    .stat-item {
        text-align: center;
    }
    
    .stat-number {
        font-size: 2rem;
        font-weight: bold;
        display: block;
    }
    
    .stat-label {
        font-size: 0.9rem;
        opacity: 0.9;
    }
    
    .filter-tabs {
        display: flex;
        gap: 10px;
        margin-bottom: 30px;
        flex-wrap: wrap;
    }
    
    .filter-tab {
        padding: 10px 20px;
        border: 2px solid #dee2e6;
        border-radius: 25px;
        background: white;
        color: #495057;
        text-decoration: none;
        transition: all 0.3s ease;
        cursor: pointer;
    }
    
    .filter-tab.active {
        background: #007bff;
        color: white;
        border-color: #007bff;
    }
    
    .filter-tab:hover {
        background: #f8f9fa;
        text-decoration: none;
        color: #495057;
    }
    
    .filter-tab.active:hover {
        background: #0056b3;
        color: white;
    }
    
    .notification-badge {
        background: #dc3545;
        color: white;
        border-radius: 50%;
        padding: 2px 6px;
        font-size: 0.7rem;
        margin-left: 5px;
    }
    
    .earned-date {
        color: #28a745;
        font-size: 0.9rem;
        font-weight: bold;
        margin-top: 10px;
    }
    
    .loading-spinner {
        text-align: center;
        padding: 40px;
    }
    
    .error-message {
        background: #f8d7da;
        color: #721c24;
        padding: 15px;
        border-radius: 8px;
        margin: 20px 0;
        text-align: center;
    }
    
    @media (max-width: 768px) {
        .achievement-card {
            padding: 15px;
        }
        
        .achievement-icon {
            font-size: 2.5rem;
        }
        
        .stats-grid {
            grid-template-columns: repeat(2, 1fr);
        }
        
        .filter-tabs {
            justify-content: center;
        }
        
        .filter-tab {
            padding: 8px 16px;
            font-size: 0.9rem;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-12">
            <h1 class="mb-4">
                üèÜ –ú–æ–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
                <span id="notification-badge" class="notification-badge" style="display: none;">0</span>
            </h1>
            
            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
            <div class="stats-card">
                <h3>–í–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å</h3>
                <div class="stats-grid">
                    <div class="stat-item">
                        <span id="total-achievements" class="stat-number">0</span>
                        <span class="stat-label">–ü–æ–ª—É—á–µ–Ω–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π</span>
                    </div>
                    <div class="stat-item">
                        <span id="total-points" class="stat-number">0</span>
                        <span class="stat-label">–û—á–∫–æ–≤ –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–æ</span>
                    </div>
                    <div class="stat-item">
                        <span id="completion-percentage" class="stat-number">0%</span>
                        <span class="stat-label">–ó–∞–≤–µ—Ä—à–µ–Ω–æ</span>
                    </div>
                    <div class="stat-item">
                        <span id="recent-achievements" class="stat-number">0</span>
                        <span class="stat-label">–ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –º–µ—Å—è—Ü</span>
                    </div>
                </div>
            </div>
            
            <!-- –§–∏–ª—å—Ç—Ä—ã -->
            <div class="filter-tabs">
                <a href="#" class="filter-tab active" data-filter="all">–í—Å–µ</a>
                <a href="#" class="filter-tab" data-filter="earned">–ü–æ–ª—É—á–µ–Ω–Ω—ã–µ</a>
                <a href="#" class="filter-tab" data-filter="available">–î–æ—Å—Ç—É–ø–Ω—ã–µ</a>
                <a href="#" class="filter-tab" data-filter="pregnancy_milestone">–ë–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å</a>
                <a href="#" class="filter-tab" data-filter="baby_milestone">–†–∞–∑–≤–∏—Ç–∏–µ —Ä–µ–±–µ–Ω–∫–∞</a>
                <a href="#" class="filter-tab" data-filter="feeding_milestone">–ö–æ—Ä–º–ª–µ–Ω–∏–µ</a>
                <a href="#" class="filter-tab" data-filter="health_milestone">–ó–¥–æ—Ä–æ–≤—å–µ</a>
                <a href="#" class="filter-tab" data-filter="app_usage">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</a>
            </div>
            
            <!-- –ó–∞–≥—Ä—É–∑–∫–∞ -->
            <div id="loading" class="loading-spinner">
                <div class="spinner-border text-primary" role="status">
                    <span class="sr-only">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                </div>
                <p class="mt-2">–ó–∞–≥—Ä—É–∂–∞–µ–º –≤–∞—à–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è...</p>
            </div>
            
            <!-- –û—à–∏–±–∫–∞ -->
            <div id="error-message" class="error-message" style="display: none;">
                –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.
            </div>
            
            <!-- –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π -->
            <div id="achievements-container" class="row">
                <!-- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
            </div>
            
            <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
            <nav id="pagination-container" style="display: none;">
                <ul class="pagination justify-content-center">
                    <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ —á–µ—Ä–µ–∑ JavaScript -->
                </ul>
            </nav>
        </div>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ -->
<div class="modal fade" id="achievementModal" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <span id="modal-icon"></span>
                    <span id="modal-title"></span>
                </h5>
                <button type="button" class="close" data-dismiss="modal">
                    <span>&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div id="modal-content">
                    <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–æ —á–µ—Ä–µ–∑ JavaScript -->
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
class AchievementManager {
    constructor() {
        this.currentFilter = 'all';
        this.currentPage = 1;
        this.achievements = [];
        this.stats = {};
        
        this.init();
    }
    
    init() {
        this.bindEvents();
        this.loadStatistics();
        this.loadAchievements();
        this.checkForNewAchievements();
    }
    
    bindEvents() {
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤
        document.querySelectorAll('.filter-tab').forEach(tab => {
            tab.addEventListener('click', (e) => {
                e.preventDefault();
                this.setActiveFilter(tab.dataset.filter);
            });
        });
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –ø–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—é
        document.addEventListener('click', (e) => {
            if (e.target.closest('.achievement-card')) {
                const achievementId = e.target.closest('.achievement-card').dataset.achievementId;
                this.showAchievementDetails(achievementId);
            }
        });
    }
    
    async loadStatistics() {
        try {
            const response = await fetch('/api/achievements/stats/');
            const data = await response.json();
            
            if (data.success) {
                this.stats = data.statistics;
                this.updateStatisticsDisplay();
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:', error);
        }
    }
    
    updateStatisticsDisplay() {
        document.getElementById('total-achievements').textContent = this.stats.total_achievements || 0;
        document.getElementById('total-points').textContent = this.stats.total_points || 0;
        document.getElementById('completion-percentage').textContent = (this.stats.completion_percentage || 0) + '%';
        document.getElementById('recent-achievements').textContent = this.stats.recent_achievements_count || 0;
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –∑–Ω–∞—á–æ–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        const badge = document.getElementById('notification-badge');
        if (this.stats.unread_notifications > 0) {
            badge.textContent = this.stats.unread_notifications;
            badge.style.display = 'inline';
        } else {
            badge.style.display = 'none';
        }
    }
    
    async loadAchievements() {
        try {
            document.getElementById('loading').style.display = 'block';
            document.getElementById('error-message').style.display = 'none';
            
            const params = new URLSearchParams({
                page: this.currentPage,
                limit: 12
            });
            
            if (this.currentFilter === 'earned') {
                params.append('completed', 'true');
            } else if (this.currentFilter === 'available') {
                params.append('completed', 'false');
            } else if (this.currentFilter !== 'all') {
                params.append('type', this.currentFilter);
            }
            
            const response = await fetch(`/api/achievements/?${params}`);
            const data = await response.json();
            
            if (data.success) {
                this.achievements = data.achievements;
                this.renderAchievements();
                this.renderPagination(data.pagination);
            } else {
                throw new Error(data.error || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞');
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π:', error);
            document.getElementById('error-message').style.display = 'block';
        } finally {
            document.getElementById('loading').style.display = 'none';
        }
    }
    
    renderAchievements() {
        const container = document.getElementById('achievements-container');
        container.innerHTML = '';
        
        if (this.achievements.length === 0) {
            container.innerHTML = `
                <div class="col-12 text-center">
                    <p class="text-muted">–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
                </div>
            `;
            return;
        }
        
        this.achievements.forEach(achievement => {
            const achievementCard = this.createAchievementCard(achievement);
            container.appendChild(achievementCard);
        });
    }
    
    createAchievementCard(achievement) {
        const col = document.createElement('div');
        col.className = 'col-md-6 col-lg-4';
        
        const cardClass = achievement.is_earned ? 'achievement-card earned' : 
                         (achievement.progress && achievement.progress.progress_percentage > 0) ? 'achievement-card in-progress' : 'achievement-card';
        
        let progressBar = '';
        if (!achievement.is_earned && achievement.show_progress && achievement.progress) {
            const percentage = achievement.progress.progress_percentage;
            progressBar = `
                <div class="progress-bar-container">
                    <div class="progress-bar" style="width: ${percentage}%">
                        <span class="progress-text">${percentage}%</span>
                    </div>
                </div>
                <small class="text-muted mt-1">
                    ${achievement.progress.current_progress} / ${achievement.progress.target_value}
                </small>
            `;
        }
        
        let earnedDate = '';
        if (achievement.is_earned && achievement.earned_at) {
            const date = new Date(achievement.earned_at);
            earnedDate = `
                <div class="earned-date">
                    ‚úÖ –ü–æ–ª—É—á–µ–Ω–æ ${date.toLocaleDateString('ru-RU')}
                </div>
            `;
        }
        
        col.innerHTML = `
            <div class="${cardClass}" data-achievement-id="${achievement.id}">
                <div class="achievement-icon">${achievement.icon}</div>
                <div class="achievement-title">${achievement.title}</div>
                <div class="achievement-description">${achievement.description}</div>
                <div class="achievement-meta">
                    <span class="achievement-points">${achievement.points} –æ—á–∫–æ–≤</span>
                    <span class="achievement-difficulty difficulty-${achievement.difficulty}">
                        ${achievement.difficulty_display}
                    </span>
                </div>
                ${progressBar}
                ${earnedDate}
            </div>
        `;
        
        return col;
    }
    
    renderPagination(pagination) {
        const container = document.getElementById('pagination-container');
        
        if (pagination.total_pages <= 1) {
            container.style.display = 'none';
            return;
        }
        
        container.style.display = 'block';
        const ul = container.querySelector('.pagination');
        ul.innerHTML = '';
        
        // –ü—Ä–µ–¥—ã–¥—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
        if (pagination.has_previous) {
            ul.innerHTML += `
                <li class="page-item">
                    <a class="page-link" href="#" data-page="${pagination.current_page - 1}">–ü—Ä–µ–¥—ã–¥—É—â–∞—è</a>
                </li>
            `;
        }
        
        // –ù–æ–º–µ—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü
        for (let i = 1; i <= pagination.total_pages; i++) {
            const activeClass = i === pagination.current_page ? 'active' : '';
            ul.innerHTML += `
                <li class="page-item ${activeClass}">
                    <a class="page-link" href="#" data-page="${i}">${i}</a>
                </li>
            `;
        }
        
        // –°–ª–µ–¥—É—é—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
        if (pagination.has_next) {
            ul.innerHTML += `
                <li class="page-item">
                    <a class="page-link" href="#" data-page="${pagination.current_page + 1}">–°–ª–µ–¥—É—é—â–∞—è</a>
                </li>
            `;
        }
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
        ul.querySelectorAll('.page-link').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const page = parseInt(e.target.dataset.page);
                if (page && page !== this.currentPage) {
                    this.currentPage = page;
                    this.loadAchievements();
                }
            });
        });
    }
    
    setActiveFilter(filter) {
        this.currentFilter = filter;
        this.currentPage = 1;
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π —Ç–∞–±
        document.querySelectorAll('.filter-tab').forEach(tab => {
            tab.classList.remove('active');
        });
        document.querySelector(`[data-filter="${filter}"]`).classList.add('active');
        
        this.loadAchievements();
    }
    
    async showAchievementDetails(achievementId) {
        try {
            const response = await fetch(`/api/achievements/${achievementId}/`);
            const data = await response.json();
            
            if (data.success) {
                const achievement = data.achievement;
                
                document.getElementById('modal-icon').textContent = achievement.icon;
                document.getElementById('modal-title').textContent = achievement.title;
                
                let modalContent = `
                    <p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> ${achievement.description}</p>
                    <p><strong>–¢–∏–ø:</strong> ${achievement.type_display}</p>
                    <p><strong>–°–ª–æ–∂–Ω–æ—Å—Ç—å:</strong> ${achievement.difficulty_display}</p>
                    <p><strong>–û—á–∫–∏:</strong> ${achievement.points}</p>
                `;
                
                if (achievement.is_earned) {
                    const earnedDate = new Date(achievement.earned_at);
                    modalContent += `
                        <div class="alert alert-success">
                            <strong>‚úÖ –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–æ!</strong><br>
                            –î–∞—Ç–∞ –ø–æ–ª—É—á–µ–Ω–∏—è: ${earnedDate.toLocaleDateString('ru-RU')} –≤ ${earnedDate.toLocaleTimeString('ru-RU')}
                        </div>
                    `;
                } else if (achievement.progress && achievement.show_progress) {
                    const progress = achievement.progress;
                    modalContent += `
                        <div class="alert alert-info">
                            <strong>üìä –ü—Ä–æ–≥—Ä–µ—Å—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:</strong><br>
                            ${progress.current_progress} / ${progress.target_value} (${progress.progress_percentage}%)
                            <div class="progress mt-2">
                                <div class="progress-bar" style="width: ${progress.progress_percentage}%"></div>
                            </div>
                        </div>
                    `;
                }
                
                document.getElementById('modal-content').innerHTML = modalContent;
                $('#achievementModal').modal('show');
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–µ—Ç–∞–ª–µ–π –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:', error);
        }
    }
    
    async checkForNewAchievements() {
        try {
            const response = await fetch('/api/achievements/check/', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-CSRFToken': this.getCSRFToken()
                }
            });
            
            const data = await response.json();
            
            if (data.success && data.new_achievements.length > 0) {
                this.showNewAchievementNotification(data.new_achievements);
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏ —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
                this.loadStatistics();
                this.loadAchievements();
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –Ω–æ–≤—ã—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π:', error);
        }
    }
    
    showNewAchievementNotification(achievements) {
        achievements.forEach(achievement => {
            // –°–æ–∑–¥–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–æ–≤–æ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏
            const notification = document.createElement('div');
            notification.className = 'alert alert-success alert-dismissible fade show position-fixed';
            notification.style.cssText = 'top: 20px; right: 20px; z-index: 9999; max-width: 400px;';
            notification.innerHTML = `
                <strong>üéâ –ù–æ–≤–æ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ!</strong><br>
                ${achievement.icon} ${achievement.title}<br>
                <small>+${achievement.points} –æ—á–∫–æ–≤</small>
                <button type="button" class="close" data-dismiss="alert">
                    <span>&times;</span>
                </button>
            `;
            
            document.body.appendChild(notification);
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.remove();
                }
            }, 5000);
        });
    }
    
    getCSRFToken() {
        return document.querySelector('[name=csrfmiddlewaretoken]')?.value || '';
    }
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –º–µ–Ω–µ–¥–∂–µ—Ä –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener('DOMContentLoaded', () => {
    new AchievementManager();
});
</script>
{% endblock %}