# UI-тесты для веб-интерфейса материнского ухода

## Обзор

В рамках задачи "6.3 Провести UI-тестирование" были созданы UI-тесты для веб-интерфейса материнского ухода. Тесты проверяют отображение на разных устройствах, пользовательские сценарии и доступность интерфейса.

## Структура тестов

UI-тесты организованы в следующие классы:

1. `ResponsiveDesignTestCase` - тесты адаптивного дизайна для разных устройств
2. `UserFlowTestCase` - тесты пользовательских сценариев
3. `AccessibilityTestCase` - тесты доступности интерфейса

## Охват тестами

### Адаптивный дизайн

- **Десктоп (1366x768)**: Проверка многоколоночного макета, горизонтальной навигации и корректного отображения карточек.
- **Планшет (768x1024)**: Проверка двухколоночного макета и корректного отображения навигации.
- **Мобильный (375x667)**: Проверка одноколоночного макета, меню-гамбургера и вертикального расположения карточек.

### Пользовательские сценарии

- **Счетчик схваток**: Проверка полного цикла использования счетчика схваток (начало сессии, запись схваток, завершение сессии, просмотр статистики).
- **Профиль ребенка**: Проверка создания профиля ребенка, добавления измерений и просмотра данных.
- **Таймер сна**: Проверка использования таймера сна (выбор ребенка, выбор типа сна, запуск таймера, завершение сессии, просмотр истории).

### Доступность интерфейса

- **Семантический HTML**: Проверка использования семантических элементов HTML5 для улучшения доступности.
- **Alt-атрибуты изображений**: Проверка наличия альтернативного текста для всех изображений.
- **Метки форм**: Проверка наличия связанных меток для всех полей ввода.
- **Навигация с клавиатуры**: Проверка возможности навигации по интерфейсу с помощью клавиши Tab.
- **Контрастность цветов**: Базовая проверка контрастности текста и фона для основных элементов.

## Запуск тестов

Для запуска UI-тестов используйте скрипт `run_ui_tests.py`:

```bash
python run_ui_tests.py
```

Этот скрипт запустит все UI-тесты и выведет результаты.

## Требования для запуска тестов

Для запуска UI-тестов требуются следующие компоненты:

1. **Selenium WebDriver**: Библиотека для автоматизации браузера.
2. **ChromeDriver или GeckoDriver**: Драйверы для управления браузерами Chrome или Firefox.
3. **Django LiveServerTestCase**: Компонент Django для запуска тестового сервера.

Установка зависимостей:

```bash
pip install selenium
```

Установка ChromeDriver (для Windows):

```bash
# Скачайте ChromeDriver с https://sites.google.com/a/chromium.org/chromedriver/downloads
# и добавьте его в PATH
```

## Решение проблем с запуском тестов

### 1. Проблема с запуском браузера в безголовом режиме

**Проблема**: При запуске тестов в безголовом режиме возникает ошибка.

**Решение**: Убедитесь, что установлена последняя версия ChromeDriver, соответствующая версии вашего браузера Chrome. Также можно попробовать запустить тесты без безголового режима, удалив опцию `--headless`.

### 2. Проблема с поиском элементов на странице

**Проблема**: Тесты не могут найти элементы на странице.

**Решение**: Убедитесь, что элементы имеют правильные идентификаторы, классы или другие селекторы. Также можно увеличить время ожидания в методе `wait_for_element`.

### 3. Проблема с циклическими импортами

**Проблема**: При запуске тестов возникают ошибки циклических импортов.

**Решение**: Используйте те же решения, что и для интеграционных тестов (отложенный импорт, импорт только необходимых компонентов, абсолютные импорты).

## Выявленные проблемы и их решения

### 1. Проблема с адаптивным дизайном на мобильных устройствах

**Проблема**: На мобильных устройствах некоторые элементы интерфейса отображаются некорректно или перекрываются.

**Решение**: Добавлены медиа-запросы для корректного отображения элементов на экранах разных размеров. Улучшена вёрстка для обеспечения корректного отображения на мобильных устройствах.

### 2. Проблема с доступностью форм

**Проблема**: Некоторые поля форм не имеют связанных меток, что затрудняет использование интерфейса для пользователей с экранными читалками.

**Решение**: Добавлены метки для всех полей ввода с использованием атрибута `for`, связанного с `id` поля.

### 3. Проблема с контрастностью цветов

**Проблема**: Некоторые элементы интерфейса имеют недостаточную контрастность между текстом и фоном.

**Решение**: Улучшена цветовая схема для обеспечения достаточной контрастности в соответствии с рекомендациями WCAG 2.1.

### 4. Проблема с навигацией с клавиатуры

**Проблема**: Некоторые интерактивные элементы не получают фокус при навигации с помощью клавиши Tab.

**Решение**: Добавлены атрибуты `tabindex` для обеспечения корректного порядка навигации с клавиатуры.

## Рекомендации

1. Регулярно запускать UI-тесты при внесении изменений в интерфейс.
2. Добавлять новые UI-тесты при реализации новых компонентов интерфейса.
3. Использовать результаты UI-тестов для выявления и устранения проблем с отображением и доступностью.
4. Тестировать интерфейс на реальных устройствах разных размеров для обеспечения корректного отображения.
5. Следовать рекомендациям WCAG 2.1 для обеспечения доступности интерфейса.
6. Настроить автоматический запуск UI-тестов в процессе непрерывной интеграции (CI).

## Дополнительные инструменты для тестирования доступности

Для более глубокого тестирования доступности рекомендуется использовать следующие инструменты:

1. **axe-core**: Библиотека для автоматизированного тестирования доступности.
2. **WAVE**: Инструмент для оценки доступности веб-страниц.
3. **Lighthouse**: Инструмент Google для аудита производительности, доступности и SEO.
4. **Screen readers**: NVDA, JAWS или VoiceOver для тестирования с экранными читалками.

## Дальнейшие улучшения

1. Добавить более глубокое тестирование доступности с использованием специализированных библиотек.
2. Расширить набор тестируемых пользовательских сценариев.
3. Добавить тестирование производительности интерфейса.
4. Реализовать визуальное регрессионное тестирование для отслеживания изменений в интерфейсе.
5. Добавить тестирование на реальных мобильных устройствах с использованием Appium или аналогичных инструментов.