---
version: null
meta:
  environment: python
  toolchain:
    name: pip
    version: 3.11
build:
  requirementsPath: requirements.txt
run:
  scriptName: app.py
  persistenceMount: /data
  containerPort: "80"

deploy:
  environment:
    DEBUG: "False"
    ALLOWED_HOSTS: "*.amvera.ru,*.amvera.io"
    USE_HTTPS: "True"
    PYTHONUNBUFFERED: "1"
    DATABASE_URL: "sqlite:////data/mom_baby_bot.db"
    DATABASE_PATH: "/data/mom_baby_bot.db"
    # Дополнительные настройки для стабильности
    DJANGO_LOG_LEVEL: "INFO"
    BOT_LOG_LEVEL: "INFO"
    LOG_LEVEL: "INFO"
    WEBAPP_PORT: "80"
    # Настройки Gunicorn
    GUNICORN_WORKERS: "2"
    GUNICORN_TIMEOUT: "120"
